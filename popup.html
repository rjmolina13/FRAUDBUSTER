<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FraudBuster</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg class="shield-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        <h1>FraudBuster</h1>
      </div>
      <div class="toggle-container">
        <label class="toggle-switch">
          <input type="checkbox" id="extensionToggle">
          <span class="slider"></span>
        </label>
        <span class="toggle-label">Active</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Scan Section -->
      <section class="scan-section">
        <button id="scanButton" class="scan-button" disabled>
          <svg class="scan-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <span class="scan-text">Scan Page</span>
        </button>
        <p class="scan-description">Analyze this page for fraudulent job postings</p>
      </section>

      <!-- Fraud Detection Section -->
      <section class="fraud-detection-section" id="fraudDetectorSection">
        <h3>Job Fraud Detection</h3>
        <div class="fraud-detector-status">
          <span class="status-label">Detector Status:</span>
          <span class="status-value" id="fraudDetectorStatus">Checking...</span>
        </div>
        <div class="job-postings-info">
          <span class="job-count-label">Job Postings Found:</span>
          <span class="job-count" id="jobCount">0</span>
        </div>
        <div class="fraud-detection-buttons">
          <button id="analyzeJobsButton" class="analyze-button" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c2.12 0 4.07.74 5.61 1.98"></path>
            </svg>
            Analyze Jobs
          </button>
          <button id="refreshJobsButton" class="refresh-button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <polyline points="1 20 1 14 7 14"></polyline>
              <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
            </svg>
            Refresh
          </button>
        </div>
        <div class="job-analysis-results" id="jobAnalysisResults"></div>
      </section>

      <!-- Results Section -->
      <section class="results-section" id="resultsSection" style="display: none;">
        <div class="risk-indicator">
          <div class="risk-circle" id="riskCircle">
            <span class="risk-percentage" id="riskPercentage">0%</span>
          </div>
          <div class="risk-details">
            <h3 class="risk-title" id="riskTitle">Analyzing...</h3>
            <p class="risk-description" id="riskDescription">Please wait while we scan the page</p>
          </div>
        </div>
        
        <div class="analysis-details" id="analysisDetails">
          <div class="detail-item">
            <span class="detail-label">ML Confidence:</span>
            <span class="detail-value" id="mlConfidence">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Community Reports:</span>
            <span class="detail-value" id="communityReports">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Domain Status:</span>
            <span class="detail-value" id="domainStatus">--</span>
          </div>
        </div>
      </section>

      <!-- Comprehensive Analysis Results Section -->
      <section class="comprehensive-analysis-section" id="comprehensiveAnalysisSection" style="display: none;">
        <h3>Fraud Analysis Results</h3>
        <div class="analysis-result-card" id="analysisResultCard">
          <div class="analysis-header">
            <div class="detection-method" id="detectionMethod">Analyzing...</div>
            <div class="fraud-status" id="fraudStatus">Unknown</div>
          </div>
          <div class="analysis-details" id="comprehensiveAnalysisDetails">
            <div class="detail-row">
              <span class="detail-label">Risk Level:</span>
              <span class="detail-value" id="riskLevelValue">--</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Confidence:</span>
              <span class="detail-value" id="confidenceValue">--</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Domain:</span>
              <span class="detail-value" id="domainValue">--</span>
            </div>
          </div>
          <div class="analysis-reasons" id="analysisReasons" style="display: none;">
            <h4>Detection Reasons:</h4>
            <ul id="reasonsList"></ul>
          </div>
        </div>
        
        <!-- Manual Review Section -->
        <div class="manual-review-section" id="manualReviewSection" style="display: none;">
          <div class="manual-review-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="help-icon">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            <h4>Manual Review Needed</h4>
          </div>
          <p class="manual-review-description">
            Our automated systems couldn't determine if this page is fraudulent. 
            Please help us improve by providing your assessment.
          </p>
          <div class="manual-review-buttons">
            <button id="reportFraudButton" class="manual-button fraud-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
              Report as Fraud
            </button>
            <button id="markLegitimateButton" class="manual-button legitimate-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"></path>
                <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c2.12 0 4.07.74 5.61 1.98"></path>
              </svg>
              Mark as Legitimate
            </button>
          </div>
        </div>
        
        <!-- Domain Reporting Section -->
        <div class="domain-reporting-section" id="domainReportingSection" style="display: none;">
          <h4>Report New Fraudulent Domain</h4>
          <p class="domain-reporting-description">
            Help protect others by reporting this domain as fraudulent.
          </p>
          <div class="domain-info">
            <span class="domain-label">Domain:</span>
            <span class="domain-name" id="reportDomainName">--</span>
          </div>
          <div class="reporting-form">
            <label for="fraudReason">Reason for reporting:</label>
            <select id="fraudReason" class="fraud-reason-select">
              <option value="fake_jobs">Fake job postings</option>
              <option value="phishing">Phishing attempt</option>
              <option value="scam">Financial scam</option>
              <option value="identity_theft">Identity theft</option>
              <option value="other">Other suspicious activity</option>
            </select>
            <button id="submitDomainReportButton" class="submit-report-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                <path d="M2 2l7.586 7.586"></path>
                <circle cx="11" cy="11" r="2"></circle>
              </svg>
              Submit Report
            </button>
          </div>
        </div>
      </section>

      <!-- User Feedback Section -->
      <section class="user-feedback-section" id="userFeedbackSection" style="display: none;">
        <h3>Rate Detection Accuracy</h3>
        <div class="feedback-content">
          <p class="feedback-question">How accurate was this fraud detection?</p>
          <div class="feedback-buttons">
            <button id="feedbackCorrect" class="feedback-button correct">
              <span class="feedback-icon">üëç</span>
              Correct
            </button>
            <button id="feedbackIncorrect" class="feedback-button incorrect">
              <span class="feedback-icon">üëé</span>
              Incorrect
            </button>
            <button id="feedbackUnsure" class="feedback-button unsure">
              <span class="feedback-icon">ü§î</span>
              Unsure
            </button>
          </div>
          <div id="feedbackDetails" class="feedback-details" style="display: none;">
            <textarea id="feedbackComment" placeholder="Optional: Tell us more about why this detection was incorrect..."></textarea>
            <button id="submitFeedback" class="action-button submit-feedback">
              Submit Feedback
            </button>
          </div>
          <div id="feedbackSuccess" class="feedback-success" style="display: none;">
            <span class="success-icon">‚úÖ</span>
            Thank you for your feedback!
          </div>
        </div>
      </section>

      <!-- Community Section -->
      <section class="community-section">
        <h3>Community Actions</h3>
        <div class="community-buttons">
          <button id="reportButton" class="community-button report-button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3l18 18M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z"></path>
              <path d="M12 8v4M12 16h.01"></path>
            </svg>
            Report URL
          </button>
          <div class="vote-buttons">
            <button id="upvoteButton" class="community-button vote-button upvote">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M7 10l5-5 5 5M12 5v14"></path>
              </svg>
            </button>
            <button id="downvoteButton" class="community-button vote-button downvote">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 14l-5 5-5-5M12 19V5"></path>
              </svg>
            </button>
          </div>
        </div>
        <div class="community-stats" id="communityStats">
          <span class="stat-item">Reports: <span id="totalReports">0</span></span>
          <span class="stat-item">Your Contributions: <span id="userContributions">0</span></span>
        </div>
      </section>

      <!-- Settings Section -->
      <section class="settings-section">
        <details class="settings-details">
          <summary>Settings</summary>
          <div class="settings-content">
            <div class="setting-item">
              <label for="autoScan">Auto-scan pages</label>
              <input type="checkbox" id="autoScan">
            </div>
            <div class="setting-item">
              <label for="sensitivity">Sensitivity Level</label>
              <input type="range" id="sensitivity" min="1" max="10" value="5">
              <span class="sensitivity-value" id="sensitivityValue">5</span>
            </div>
            <div class="setting-item">
              <label for="darkMode">Dark Mode</label>
              <select id="darkMode">
                <option value="auto">Auto</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
              </select>
            </div>
          </div>
        </details>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p class="version">v1.0.0</p>
      <div class="status-indicator" id="statusIndicator">
        <span class="status-dot"></span>
        <span class="status-text">Ready</span>
      </div>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay" style="display: none;">
    <div class="loading-spinner"></div>
    <p class="loading-text">Analyzing page...</p>
  </div>

  <script src="popup.js"></script>
</body>
</html>